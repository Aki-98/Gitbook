
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Setting up gitbook full process and pitfall record · CS Blog</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="leah">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-accordion/accordion.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../[Source Code Reading]/" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../">
            
                <a href="../">
            
                    
                    English
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="./">
            
                <a href="./">
            
                    
                    [engineering practice]
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.1.1" data-path="Setting Up Gitbook Full Process and Pitfall Record.html">
            
                <a href="Setting Up Gitbook Full Process and Pitfall Record.html">
            
                    
                    Setting up gitbook full process and pitfall record
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../[Source Code Reading]/">
            
                <a href="../[Source Code Reading]/">
            
                    
                    [source code reading]
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../[Source Code Reading]/What does passing 0 to PackageManager.getPackageInfo as a Flag mean.html">
            
                <a href="../[Source Code Reading]/What does passing 0 to PackageManager.getPackageInfo as a Flag mean.html">
            
                    
                    What does passing 0 to packagemanager.getpackageinfo as a flag mean
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../中文/">
            
                <a href="../../中文/">
            
                    
                    中文
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../中文/【工程实践】/">
            
                <a href="../../中文/【工程实践】/">
            
                    
                    【工程实践】
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../中文/【工程实践】/搭建Gitbook全流程及踩坑记录.html">
            
                <a href="../../中文/【工程实践】/搭建Gitbook全流程及踩坑记录.html">
            
                    
                    搭建gitbook全流程及踩坑记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../中文/【源码阅读】/">
            
                <a href="../../中文/【源码阅读】/">
            
                    
                    【源码阅读】
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../中文/【源码阅读】/PackageManager.getPackageInfo(">
            
                <span>
            
                    
                    Packagemanager.getpackageinfo()传入0作为flag意味着什么
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Setting up gitbook full process and pitfall record</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>Here is the translation of the provided text into English:</p>
<hr>
<p>All Python programs mentioned here are written by myself. Since I only considered my own needs and didn&apos;t think about other situations, it would be better to modify them according to your own situation if you want to copy and use them.</p>
<blockquote>
<p>Code location: <a href="https://github.com/Leah-98/Python-Automation/tree/main/Gitbook" target="_blank">https://github.com/Leah-98/Python-Automation/tree/main/Gitbook</a></p>
</blockquote>
<p>The biggest advantage of processing your notes into Gitbook is the ability to search globally.</p>
<h1 id="step-1-prepare-the-md-note-repository">Step 1: Prepare the MD Note Repository</h1>
<p><strong>1. Convert all files to MD or reference them in MD files</strong></p>
<p>Gitbook can only render Markdown pages.</p>
<p>Some of my old notes were exported from Evernote and Youdao Cloud, which were in web format. I converted the web format to PDF and referenced it in the README.md folder (append_other_files_to_readme.py).</p>
<p>There are also some scattered TXT notes, which I directly changed the suffix to MD (txt_to_md.py).</p>
<p><strong>2. Place the images referenced in MD in a subfolder at the same level as the MD file, and name the subfolder after the MD file with &quot;_imgs&quot; appended</strong></p>
<p>The image references in the previous notes were messy. Some were web images, and some were absolute paths written by Typora. When operating on the same note repository on different computers, the absolute paths were inconsistent. Some were placed in the &quot;imgs&quot; folder with relative paths, but the &quot;imgs&quot; folder was located in various positions within the note repository, making it messy.</p>
<p>I used a Python program to unify and place them in a subfolder at the same level as the MD file, naming the subfolder after the MD file with &quot;_imgs&quot; appended, and rewriting the image references in MD to relative paths (reformat_imgs.py).</p>
<p>Also, many of my book excerpts are directly taken from physical books. The phone photos are too large and need to be compressed (compress_pictures.py).</p>
<p><strong>3. Generate SUMMARY.md</strong></p>
<p>Arrange all MD files and write them in SUMMARY.md. If it&apos;s a subfolder and doesn&apos;t have README.md, create one yourself (generate_summary.py).</p>
<p>This is better than gitbook init, which has various bugs and cannot generate a summary based on all MD files.</p>
<h1 id="step-2-prepare-the-gitbook-setup-environment">Step 2: Prepare the Gitbook Setup Environment</h1>
<p>I followed some online tutorials and encountered many issues.</p>
<blockquote>
<p>This tutorial is too simple. You can take a look to get a general idea, but don&apos;t follow its procedures:</p>
<p><a href="https://tonydeng.github.io/gitbook-zh/" target="_blank">https://tonydeng.github.io/gitbook-zh/</a></p>
<p>This one is more detailed and better:</p>
<p><a href="https://1927344728.github.io/fed-knowledge/tools/Gitbook/" target="_blank">https://1927344728.github.io/fed-knowledge/tools/Gitbook/</a></p>
</blockquote>
<p><strong>0. Preparing for pitfalls</strong></p>
<p>At first, I directly downloaded and installed from the official website:</p>
<blockquote>
<p>Official website: <a href="https://nodejs.org/en" target="_blank">https://nodejs.org/en</a></p>
</blockquote>
<p>However, the version from the official website (v18.x) is too new, causing various adaptation issues with gitbook. Later, I downgraded to v.10.x to use gitbook normally.</p>
<p>I encountered an error when installing gitbook-cli after installing v18.x version of nodejs and calling gitbook init in the command line:</p>
<pre><code>shellCopy code/home/travis/.nvm/versions/node/v12.18.3/lib/node_modules/gitbook-cli/node_modules/npm/node_modules/graceful-fs/polyfills.js:287
      if (cb) cb.apply(this, arguments)
                 ^
TypeError: cb.apply is not a function
    at /home/travis/.nvm/versions/node/v12.18.3/lib/node_modules/gitbook-cli/node_modules/npm/node_modules/graceful-fs/polyfills.js:287:18
    at FSReqCallback.oncomplete (fs.js:169:5)
</code></pre><blockquote>
<p>Solution: <a href="https://stackoverflow.com/questions/64211386/gitbook-cli-install-error-typeerror-cb-apply-is-not-a-function-inside-graceful" target="_blank">https://stackoverflow.com/questions/64211386/gitbook-cli-install-error-typeerror-cb-apply-is-not-a-function-inside-graceful</a></p>
</blockquote>
<p>You need to update the graceful-fs version.</p>
<p>When I tried to update with npm, I encountered another issue where any command would result in an error &quot;ERR! Cannot read property &apos;insert&apos; of undefined&quot;.</p>
<blockquote>
<p>Solution: <a href="https://github.com/npm/cli/issues/4876" target="_blank">https://github.com/npm/cli/issues/4876</a></p>
</blockquote>
<p>You need to change the mirror to <a href="https://registry.npmmirror.com/" target="_blank">https://registry.npmmirror.com</a>. If you also need to set a proxy, there is a tutorial here:</p>
<blockquote>
<p>Setting npm proxy: <a href="https://blog.csdn.net/yanzi1225627/article/details/80247758" target="_blank">https://blog.csdn.net/yanzi1225627/article/details/80247758</a></p>
</blockquote>
<p>After updating, calling any gitbook command resulted in no response, no error, and no information. The local directory remained unchanged. I then downgraded nodejs to 10.x.</p>
<p>During this process, there was also an issue that gitbook and gitbook-cli could not coexist. You need to uninstall gitbook to use gitbook-cli (the command-line tool for gitbook). After installing gitbook-cli, the first time you call the gitbook command, like checking the version with <code>gitbook -V</code>, gitbook-cli will install the corresponding version of gitbook.</p>
<p>Since I got stuck at the &quot;install gitbook&quot; step every time I called the gitbook command and checked online for a solution, I found that you can clone gitbook&apos;s github repository and then install and link it yourself:</p>
<pre><code>shellCopy codegit clone https://github.com/GitbookIO/gitbook.git
cd gitbook
npm install
npm link
</code></pre><p>Firstly, the instructions in the gitbook repository say to install with <code>bun</code> instead of <code>npm</code>. Secondly, this installation is equivalent to <code>npm install gitbook</code>, which conflicts with gitbook-cli. Therefore, this method is incorrect.</p>
<p>Here is the correct method:</p>
<p><strong>1. Install nvm (Node.js version manager) and Node.js v10.x</strong></p>
<p>Choose one based on your system:</p>
<pre><code>shellCopy codecurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash

bash
Copy code
wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
</code></pre><p>Install Node.js v10.x and use it:</p>
<pre><code>shellCopy codenvm install 10
nvm use 10
</code></pre><p>I also encountered an issue here. In the above steps, the npm version compatible with Node.js v10.x will be installed. However, I previously used v18.x. After switching to Node.js v10.x, the npm version did not change. Any npm command would result in an error. Later, I switched back to v18, uninstalled npm, which uninstalls the latest version of npm, and then switched to v10.x, allowing me to use the older version of npm.</p>
<pre><code>shellCopy codenvm use 18
npm uninstall npm -g
</code></pre><p>The <code>-g</code> means the operation is carried out globally, which will be used in the following commands.</p>
<p><strong>2. Install and use gitbook-cli &amp; gitbook</strong></p>
<pre><code>shellCopy code
npm install gitbook-cli -g
</code></pre><p>The <code>npm install -g</code> command is used to globally install Node.js modules. This means the installed modules will be placed in a specific directory, usually the global <code>node_modules</code> directory of your system, not in the <code>node_modules</code> directory of the current project.</p>
<p>If you don&apos;t use the <code>-g</code> (global) parameter in the <code>npm install</code> command, the command will install the specified package in the <code>node_modules</code> folder of the current project, not in the global environment.</p>
<pre><code>shellCopy code
gitbook -V
</code></pre><p>Check the gitbook version. The first time you call any gitbook command, it will attempt to install gitbook.</p>
<p>Running <code>gitbook -V</code> again will show the versions of gitbook-cli and gitbook.</p>
<p>Note: Do not install gitbook with <code>npm install gitbook</code> directly; use gitbook-cli instead.</p>
<p><strong>3. Preview the Gitbook website and make adjustments</strong></p>
<p>Switch the command line to the root directory of your MD source files and run the following command to automatically generate README.md and SUMMARY.md:</p>
<pre><code>shellCopy code
gitbook init
</code></pre><p>Note: Do not include the character &quot;#&quot; in the directory names and filenames under the MD files, meaning the generated SUMMARY.md should not contain the &quot;#&quot; character. If it does, it will cause the links in the gitbook page&apos;s left navigation bar to not work.</p>
<p>Also, do not have consecutive curly braces in the MD files, like .</p>
<blockquote>
<p>Related instructions: <a href="https://wkcom.gitee.io/gitbook&#x7684;&#x4F7F;&#x7528;/3&#x3001;gitbook&#x8FDE;&#x7EED;&#x5927;&#x62EC;&#x53F7;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x5F0F;.html" target="_blank">https://wkcom.gitee.io/gitbook%E7%9A%84%E4%BD%BF%E7%94%A8/3%E3%80%81gitbook%E8%BF%9E%E7%BB%AD%E5%A4%A7%E6%8B%AC%E5%8F%B7%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F.html</a></p>
</blockquote>
<p>Adding a space between the curly braces will resolve the issue.</p>
<p>Preview the gitbook website:</p>
<pre><code>shellCopy code
gitbook server
</code></pre><p>Open the local port in the browser to view the page:</p>
<pre><code>shellCopy code
http://localhost:4000/
</code></pre><h1 id="step-3-set-up-io-online-website">Step 3: Set up .io online website</h1>
<p>There are many solutions; I chose to directly upload the static website to Github.</p>
<p>Generate the gitbook static website, run the following command in the root directory of your MD source files:</p>
<pre><code>shellCopy code
gitbook build
</code></pre><p>This will generate a <code>_book</code> directory, containing the static website code.</p>
<p>As long as the repository has a <code>gh-pages</code> branch, you can access Gitbook Pages with the following link:</p>
<pre><code>shellCopy code
https://githubusername.github.io/reponame
</code></pre><p>So the steps are:</p>
<ol>
<li>Create an empty Github repository.</li>
<li>Check out a <code>gh-pages</code> branch, upload the static website.</li>
<li>I need multiple gitbooks, so I created a subfolder in the root directory and uploaded the corresponding static website in this subfolder.</li>
</ol>
<p>Then, I can access multiple Gitbooks with the following paths:</p>
<pre><code>shellCopy codehttps://githubusername.github.io/reponame/subfoldername1
https://githubusername.github.io/reponame/subfoldername2
</code></pre><footer class="page-footer"><span class="copyright">Copyright &#xA9; Leah 2024 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">modified time:
2024-04-12 18:40:45
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: [engineering practice]">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../[Source Code Reading]/" class="navigation navigation-next " aria-label="Next page: [source code reading]">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Setting up gitbook full process and pitfall record","level":"1.2.1.1","depth":3,"next":{"title":"[source code reading]","level":"1.2.2","depth":2,"path":"English/[Source Code Reading]/README.md","ref":"English/[Source Code Reading]/README.md","articles":[{"title":"What does passing 0 to packagemanager.getpackageinfo as a flag mean","level":"1.2.2.1","depth":3,"path":"English/[Source Code Reading]/What does passing 0 to PackageManager.getPackageInfo as a Flag mean.md","ref":"English/[Source Code Reading]/What does passing 0 to PackageManager.getPackageInfo as a Flag mean.md","articles":[]}]},"previous":{"title":"[engineering practice]","level":"1.2.1","depth":2,"path":"English/[Engineering Practice]/README.md","ref":"English/[Engineering Practice]/README.md","articles":[{"title":"Setting up gitbook full process and pitfall record","level":"1.2.1.1","depth":3,"path":"English/[Engineering Practice]/Setting Up Gitbook Full Process and Pitfall Record.md","ref":"English/[Engineering Practice]/Setting Up Gitbook Full Process and Pitfall Record.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["accordion","search-pro","-search","tbfed-pagefooter"],"root":"/","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Leah 2024","modify_label":"modified time:","modift_format":"YYYY-MM-DD HH:mm:ss"},"accordion":{},"search-pro":{},"highlight":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"leah","page":{"title":"CS Blog"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"authorName":"leah"},"title":"CS Blog","gitbook":"3.2.3"},"file":{"path":"English/[Engineering Practice]/Setting Up Gitbook Full Process and Pitfall Record.md","mtime":"2024-04-12T10:40:45.642Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-04-12T10:41:45.246Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-accordion/accordionSelector.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

